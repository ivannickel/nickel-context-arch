# Knowledge Graph Plugin - Development Guide

## Quick Start: Local Installation

### One-Time Setup

1. **Add the local marketplace** (from repo root):
   ```bash
   /plugin marketplace add ./.claude-plugins
   ```

2. **Install the plugin**:
   ```bash
   /plugin install knowledge-graph@pixee-plugins
   ```

The plugin is now active! No need to manually enable.

### Verify Installation

Check that commands are available:
```bash
/taxonomy-snapshot
/add-frontmatter
/validate-frontmatter
/navigate-to-hub
```

---

## Development Workflow

### Iterating on the Plugin

**The plugin loads from this directory.** Any changes you make are reflected immediately:

1. **Edit plugin files** (agents, commands, scripts)
2. **Changes are live** - no rebuild needed
3. **Test with slash commands** in Claude Code

### File Structure

```
knowledge-graph-plugin/
├── .claude-plugin/
│   ├── plugin.json          # Plugin manifest
│   └── marketplace.json     # Local marketplace config
├── agents/
│   ├── navigation_agent.md
│   └── taxonomy_enforcement_agent.md
├── commands/
│   ├── add-frontmatter.md
│   ├── navigate-to-hub.md
│   ├── taxonomy-snapshot.md  # Calls scan_taxonomy.py
│   └── validate-frontmatter.md
├── scripts/
│   └── scan_taxonomy.py      # Core taxonomy analysis
├── data/
│   └── taxonomy-registry.yml # Generated by scanner
└── README.md                 # User documentation
```

### Testing Changes

**Commands:**
- Edit `.md` files in `commands/`
- Run `/command-name` to test
- Changes are immediate

**Agents:**
- Edit `.md` files in `agents/`
- Changes are immediate when agent is invoked

**Scripts:**
- Edit `scripts/scan_taxonomy.py`
- Test directly: `python knowledge-graph-plugin/scripts/scan_taxonomy.py`
- Or via command: `/taxonomy-snapshot`

---

## Distribution

### Sharing with Team Members

**Option 1: Local Marketplace (Recommended)**

Team members clone the repo and run:
```bash
cd /path/to/Pixee
/plugin marketplace add ./knowledge-graph-plugin
/plugin install knowledge-graph@pixee-local-plugins
```

**Option 2: GitHub Marketplace**

1. Push `knowledge-graph-plugin/` to a separate repo
2. Create `.claude-plugin/marketplace.json` in that repo
3. Team adds marketplace: `/plugin marketplace add https://github.com/your-org/plugins`

**Option 3: Direct Settings (Team-wide)**

Add to `.claude/settings.json` in repo:
```json
{
  "extraKnownMarketplaces": {
    "pixee-plugins": {
      "source": {
        "source": "directory",
        "path": "./knowledge-graph-plugin"
      }
    }
  },
  "enabledPlugins": {
    "knowledge-graph@pixee-plugins": true
  }
}
```

---

## Plugin Architecture

### v0.1 (Current): Observation Phase

**Philosophy:** Garden, Don't Architect
- Read-only taxonomy analysis
- Weekly snapshot generation
- Pattern discovery (co-occurrence, vestigial tags)
- No enforcement, just visibility

**Key Command:** `/taxonomy-snapshot`
- Scans all markdown frontmatter
- Generates `CURRENT_TAXONOMY_SNAPSHOT.md`
- Creates `taxonomy-registry.yml`

### v0.2 (Planned): Governance Phase

- Prune vestigial tags
- Merge tag variants
- Bless canonical tags
- Deprecate tags

### v0.3 (Planned): Guidance Phase

- Real-time tag suggestions for new files
- Auto-complete from blessed taxonomy
- Consistency validation

---

## Troubleshooting

### Plugin not loading?

```bash
# Validate plugin structure
claude plugin validate ./knowledge-graph-plugin

# Check enabled plugins
/plugin list

# Re-enable if needed
/plugin enable knowledge-graph@pixee-local-plugins
```

### Commands not appearing?

1. Restart Claude Code VSCode extension
2. Check `.claude-plugin/marketplace.json` exists
3. Verify `plugin.json` has correct paths

### Script errors?

```bash
# Test script directly
python knowledge-graph-plugin/scripts/scan_taxonomy.py --output=both

# Check Python dependencies
pip install pyyaml  # Only dependency
```

---

## Contributing

When making changes:

1. **Test locally first** using the development workflow above
2. **Update version** in `.claude-plugin/plugin.json` if adding features
3. **Document changes** in README.md
4. **Commit with clear messages** about what changed

The plugin structure is designed for easy iteration - no build step, no compilation, just edit and test!
